# 产品需求文档（PRD）

## 产品名称
水印文件本地应用（Windows）

## 产品概述
水印文件本地应用是一款运行于 Windows 平台的工具软件，旨在为用户提供便捷的图片水印添加功能。用户可以通过该应用快速导入图片，添加文本或图片水印，并导出处理后的图片。应用支持多种图片格式，提供丰富的水印样式和布局选项，满足用户的多样化需求。

## 功能需求

### 1. 文件处理
#### 1.1 导入图片
- 支持单张图片拖拽或通过文件选择器导入。
- 支持批量导入，可一次性选择多张图片或直接导入整个文件夹。
- 在界面上显示已导入图片的列表（缩略图和文件名）。

#### 1.2 支持格式
- **输入格式**：
  - 必须支持主流格式，如 JPEG, PNG。
  - 强烈建议支持 BMP, TIFF。
  - PNG 格式必须支持透明通道。
- **输出格式**：
  - 用户可选择输出为 JPEG 或 PNG。

#### 1.3 导出图片
- 用户可指定一个输出文件夹。为防止覆盖原图，默认禁止导出到原文件夹。
- 提供导出文件命名规则选项：
  - 保留原文件名。
  - 添加自定义前缀（如 wm_）。
  - 添加自定义后缀（如 _watermarked）。
- 对于 JPEG 格式，提供图片质量（压缩率）调节滑块（0-100）。（可选高级功能）
- 导出时允许用户调整图片尺寸（如按宽度、高度或百分比缩放）。（可选高级功能）

### 2. 水印类型
#### 2.1 文本水印
- **内容**：用户可自定义输入任意文本。
- **字体**：可选择系统已安装的字体、字号、粗体、斜体。（可选高级功能）
- **颜色**：提供调色板让用户选择字体颜色。（可选高级功能）
- **透明度**：可调节文本的透明度（0-100%）。
- **样式**：可添加阴影或描边效果，以增强在复杂背景下的可读性。（可选高级功能）

#### 2.2 图片水印（可选高级功能）
- 用户可从本地选择一张图片（如 Logo）作为水印。
- 必须支持带透明通道的 PNG 图片。
- **缩放**：可按比例或自由调整图片水印的大小。
- **透明度**：可调节图片水印的整体透明度（0-100%）。

### 3. 水印布局与样式
#### 3.1 实时预览
- 所有对水印的调整都应在主预览窗口中实时显示效果。
- 用户可以点击图片列表切换预览不同的图片。

#### 3.2 位置
- **预设位置**：提供九宫格布局（四角、正中心），用户可一键将水印放置在这些位置。
- **手动拖拽**：用户可以直接在预览图上通过鼠标拖拽水印到任意位置。

#### 3.3 旋转
- 提供一个滑块或输入框，允许用户以任意角度旋转水印。（可选高级功能）

### 4. 配置管理
#### 4.1 水印模板
- 用户可以将当前的水印设置（包括水印内容、字体、颜色、位置、大小、透明度等所有参数）保存为一个模板。
- 用户可以加载、管理和删除已保存的模板。
- 程序启动时可自动加载上一次关闭时的设置或一个默认模板。

## 非功能性需求
- **性能**：
  - 应用应能快速加载和处理图片，单张图片处理时间不超过 2 秒。
  - 支持批量处理，最多可同时处理 100 张图片。
- **兼容性**：
  - 兼容 Windows 10 及以上版本。
- **用户界面**：
  - 界面简洁直观，操作流程清晰。
  - 提供多语言支持（至少支持中文和英文）。

## 开发计划
- **阶段 1**：基础功能开发（图片导入、导出，文本水印）。
- **阶段 2**：高级功能开发（图片水印、模板管理）。
- **阶段 3**：性能优化与多语言支持。

## 备注
- 所有功能均需经过充分测试，确保稳定性和可靠性。
- 用户反馈将作为后续功能改进的重要依据。